#SPDX-License-Identifier: MIT-0
---
# tasks file for docker-nginx
- name: Creating directories
  file: 
    path: '{{ docker_container_data_directory }}/{{ item.name }}/'
    state: directory
    recurse: true
  loop: "{{ nginx }}"

- name: Copying nginx.conf template 
  template: 
    src: nginx.conf.j2
    dest: '{{ docker_container_data_directory }}/{{ item.name }}/nginx.conf'
  loop: "{{ nginx }}"

- name: Creating container
  docker_container:
    name: '{{ item.name }}'
    image: '{{ item.image }}'
    state: '{{ item.state }}'
    published_ports: '{{ item.published_ports }}'
    volumes: '{{ item.volume }}'
  loop: "{{ nginx }}"
