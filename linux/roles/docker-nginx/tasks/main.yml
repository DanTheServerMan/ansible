#SPDX-License-Identifier: MIT-0
---
# tasks file for deploy-pihole-docker
- name: Creating directories
  file: 
    path: '{{ docker_container_directory }}/{{ item.name }}/'
    state: directory
    recurse: true
  loop: "{{ nginx }}"

- name: Copying nginx.conf template 
  template:
    src: nginx.conf.j2
    dest: '{{ docker_container_directory }}/nginx/nginx.conf'

- name: Creating container
  docker_container:
    name: '{{ item.name }}'
    image: '{{ item.image }}'
    state: '{{ item.state }}'
    recreate: '{{ item.recreate }}'
    published_ports: '{{ item.published_ports }}'
    volumes: '{{ item.volume }}'
  loop: "{{ nginx }}"
